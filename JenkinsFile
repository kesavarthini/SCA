properties([
  buildDiscarder(logRotator(numToKeepStr: '3')),
  disableConcurrentBuilds(),
])
pipeline {
    agent any
	  stages {
        stage('Build Docker '){
            steps{
                echo 'Building docker image'
                   sh ' sudo docker build -f order-service/Dockerfile -t image_of_order_service:Order_Service'
				 	//sh 'sudo mvn -f DataService/pom.xml clean install pmd:pmd sonar:sonar'
				 	//sh 'sudo mvn -f order-service/pom.xml clean install pmd:pmd sonar:sonar'
                }
        }
        stage('Docker Run') {
                steps {
                    sh 'sudo docker run  OrderService_Backend'
                }
            }
	   stage('Test') {
                steps {
                    echo 'This is the Test Stage'
                }
		
            }
        }

}


